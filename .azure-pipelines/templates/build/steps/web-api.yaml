steps:
  - task: UseDotNet@2
    displayName: 'Use .Net Core SDK 3.x'
    inputs:
      version: 3.x
  - task: DotNetCoreCLI@2
    displayName: 'dotnet restore'
    inputs:
      command: 'restore'
      projects: '**/Obj.Twins.Games.Api.csproj'
      feedsToUse: 'select'
  - task: DotNetCoreCLI@2
    displayName: 'dotnet build'
    inputs:
      projects: '**/Obj.Twins.Games.Api.csproj'
      arguments: '--configuration Release'
  - task: DotNetCoreCLI@2
    displayName: 'Publish API'
    inputs:
      command: publish
      publishWebProjects: false
      projects: '**/Obj.Twins.Games.Api.csproj'
      arguments: '--configuration Release --output $(Build.ArtifactStagingDirectory)/WebApi'
      zipAfterPublish: false      
  - publish: $(Build.ArtifactStagingDirectory)/WebApi
    artifact: web-api